<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Debug - Admin Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 50px auto;
            padding: 20px;
            background: #f8fafc;
        }
        .debug-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 { color: #2d3748; }
        .test-btn {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            margin: 5px;
            border: none;
            cursor: pointer;
        }
        .test-btn:hover {
            background: #5a67d8;
        }
        .console-log {
            background: #1a202c;
            color: #68d391;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            margin: 10px 0;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success { background: #f0fff4; border: 1px solid #9ae6b4; color: #276749; }
        .status.error { background: #fed7d7; border: 1px solid #feb2b2; color: #c53030; }
        .status.info { background: #ebf8ff; border: 1px solid #90cdf4; color: #2a69ac; }
    </style>
</head>
<body>
    <h1>üîç Admin Dashboard Navigation Debug</h1>
    
    <div class="debug-section">
        <h2>‚ùå Current Issue</h2>
        <div class="status error">
            <strong>Problem:</strong> Sidebar navigation links are not working when accessing dashboard with hash URLs like <code>#properties</code>
        </div>
        
        <div class="status info">
            <strong>Expected:</strong> Clicking sidebar links should navigate to different sections and URL should update with appropriate hash
        </div>
    </div>
    
    <div class="debug-section">
        <h2>üîß Debug Actions</h2>
        <p>Click these buttons to test the navigation:</p>
        
        <a href="dashboard.php" class="test-btn" target="_blank">Dashboard (No Hash)</a>
        <a href="dashboard.php#dashboard" class="test-btn" target="_blank">Dashboard (#dashboard)</a>
        <a href="dashboard.php#properties" class="test-btn" target="_blank">Properties (#properties)</a>
        <a href="dashboard.php#users" class="test-btn" target="_blank">Users (#users)</a>
        <a href="dashboard.php#bookings" class="test-btn" target="_blank">Bookings (#bookings)</a>
        
        <br><br>
        
        <button class="test-btn" onclick="testJavaScript()">Test JavaScript Console</button>
        <button class="test-btn" onclick="clearConsole()">Clear Console</button>
        <button class="test-btn" onclick="checkElements()">Check DOM Elements</button>
    </div>
    
    <div class="debug-section">
        <h2>üìã Debug Console</h2>
        <div id="debug-console" class="console-log">
            Debug output will appear here...
        </div>
    </div>
    
    <div class="debug-section">
        <h2>‚úÖ Solution Applied</h2>
        <p><strong>What was fixed:</strong></p>
        <ul>
            <li>‚úÖ Added hash-based navigation support</li>
            <li>‚úÖ Added <code>handleInitialNavigation()</code> method</li>
            <li>‚úÖ Added <code>hashchange</code> event listener</li>
            <li>‚úÖ Enhanced navigation with URL hash updates</li>
            <li>‚úÖ Added console debugging for navigation events</li>
            <li>‚úÖ Fixed constructor initialization order</li>
        </ul>
        
        <div class="status success">
            <strong>Status:</strong> Navigation fixes have been applied. Clear browser cache and test again.
        </div>
    </div>
    
    <div class="debug-section">
        <h2>üöÄ Testing Steps</h2>
        <ol>
            <li><strong>Clear Browser Cache:</strong> Press <code>Ctrl+F5</code> or <code>Ctrl+Shift+R</code></li>
            <li><strong>Open Developer Console:</strong> Press <code>F12</code></li>
            <li><strong>Go to Dashboard:</strong> <a href="dashboard.php" target="_blank">dashboard.php</a></li>
            <li><strong>Check Console:</strong> Look for debug messages about navigation binding</li>
            <li><strong>Test Navigation:</strong> Click sidebar links and check if they work</li>
            <li><strong>Test Hash URLs:</strong> Try accessing <code>dashboard.php#properties</code> directly</li>
        </ol>
    </div>
    
    <div class="debug-section">
        <h2>üîç Common Issues & Solutions</h2>
        <div style="margin: 15px 0;">
            <strong>Issue 1:</strong> JavaScript not loading<br>
            <strong>Solution:</strong> Check browser console for errors, verify file path
        </div>
        
        <div style="margin: 15px 0;">
            <strong>Issue 2:</strong> Event listeners not binding<br>
            <strong>Solution:</strong> Ensure DOM is loaded before script execution
        </div>
        
        <div style="margin: 15px 0;">
            <strong>Issue 3:</strong> Hash navigation not working<br>
            <strong>Solution:</strong> Check <code>handleInitialNavigation()</code> method
        </div>
        
        <div style="margin: 15px 0;">
            <strong>Issue 4:</strong> Cached JavaScript<br>
            <strong>Solution:</strong> Clear browser cache completely
        </div>
    </div>
    
    <script>
        let debugLog = [];
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}`;
            debugLog.push(logEntry);
            updateConsole();
            console.log(logEntry);
        }
        
        function updateConsole() {
            const console = document.getElementById('debug-console');
            console.textContent = debugLog.join('\n');
            console.scrollTop = console.scrollHeight;
        }
        
        function clearConsole() {
            debugLog = [];
            updateConsole();
        }
        
        function testJavaScript() {
            log('Testing JavaScript functionality...', 'info');
            
            try {
                // Test basic DOM access
                const sidebar = document.getElementById('sidebar');
                log(`Sidebar element found: ${!!sidebar}`, sidebar ? 'success' : 'error');
                
                // Test navigation links
                const navLinks = document.querySelectorAll('.nav-link');
                log(`Navigation links found: ${navLinks.length}`, navLinks.length > 0 ? 'success' : 'error');
                
                // Test current hash
                log(`Current hash: ${window.location.hash || '(none)'}`, 'info');
                
                log('JavaScript test completed', 'success');
            } catch (error) {
                log(`JavaScript error: ${error.message}`, 'error');
            }
        }
        
        function checkElements() {
            log('Checking DOM elements...', 'info');
            
            const elements = [
                'sidebar',
                'main-content', 
                'page-title',
                'loading-spinner',
                'dashboard-content',
                'properties-content'
            ];
            
            elements.forEach(id => {
                const element = document.getElementById(id);
                log(`Element #${id}: ${element ? 'Found' : 'Missing'}`, element ? 'success' : 'error');
            });
            
            // Check navigation links
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach((link, index) => {
                const section = link.getAttribute('data-section');
                log(`Nav link ${index}: data-section="${section}"`, 'info');
            });
        }
        
        // Auto-run basic tests when page loads
        window.addEventListener('load', () => {
            log('Debug page loaded', 'info');
            checkElements();
        });
    </script>
</body>
</html>